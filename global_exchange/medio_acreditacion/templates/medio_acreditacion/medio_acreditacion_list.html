{% extends 'base_admin.html' %}
{% load humanize %}
{% block dashboard_content %}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important; background-color: #f8f9fa !important; margin: 0 !important; padding: 0 !important; }
.main-wrapper { padding: 24px; min-height: 100vh; max-width: 1200px; margin: 0 auto; }
.page-container { background: white; border-radius: 12px; padding: 32px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
.page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; }
.page-title { font-size: 24px; font-weight: 600; color: #1a1a1a; margin: 0; }
.btn-add { font-family: 'Poppins', sans-serif; background-color: #152C70; color: white; padding: 10px 20px; border-radius: 6px; border: none; font-size: 14px; font-weight: 500; cursor: pointer; transition: background-color 0.2s; }
.btn-add:hover { background-color: #1a2f7a; }
.table-container { overflow-x: auto; border-radius: 8px; border: 1px solid #e1e5e9; margin-bottom: 24px; }
.custom-table { width: 100%; border-collapse: collapse; background: white; margin: 0; }
.custom-table thead th { background-color: transparent; border: none; padding: 16px 20px 12px 20px; text-align: center; font-size: 14px; font-weight: 500; color: #5D5FEF; border-bottom: 1px solid #f0f0f0; }
.custom-table tbody td { border: none; border-bottom: 1px solid #f0f0f0; padding: 20px; font-size: 14px; color: #000000; vertical-align: middle; }
.custom-table tbody tr:hover { background-color: #f9fafb; }
.custom-table tbody tr:last-child td { border-bottom: none; }
.status-badge { padding: 6px 16px; border-radius: 4px; font-size: 14px; font-weight: 500; text-align: center; display: inline-block; min-width: 90px; }
.status-activo { background-color: #9CDBA6; color: #00AC4F; }
.status-inactivo { background-color: #FFC5C5; color: #DF0404; }
.btn { padding: 6px 12px; border-radius: 4px; font-size: 12px; font-weight: 500; border: none; cursor: pointer; text-decoration: none; display: inline-block; margin-right: 4px; transition: all 0.2s; }
.btn-primary { background-color: #5D5FEF; color: white; }
.btn-primary:hover { background-color: #4338ca; }
.btn-danger { background-color: #ef4444; color: white; }
.btn-danger:hover { background-color: #dc2626; }
.no-results { text-align: center; padding: 48px 16px; color: #B5B7C0; font-style: italic; font-size: 14px; }
@media (max-width: 768px) { .main-wrapper { padding: 16px; } .page-container { padding: 20px; } .page-header { flex-direction: column; align-items: flex-start; gap: 16px; } .page-title { font-size: 20px; } .table-container { border: none; border-radius: 0; } .custom-table { font-size: 13px; } .custom-table thead { display: none; } .custom-table tbody tr { display: block; margin-bottom: 16px; background: #f9fafb; border-radius: 8px; padding: 16px; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); } .custom-table tbody tr:hover { background-color: #f3f4f6; } .custom-table tbody td { display: block; padding: 4px 0; border: none; text-align: center; } .custom-table tbody td:before { content: attr(data-label) ": "; font-weight: 500; color: #5D5FEF; display: inline-block; min-width: 100px; margin-bottom: 2px; } .custom-table tbody td:last-child { margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb; } .custom-table tbody td:last-child:before { content: "Acciones: "; } .btn { display: inline-block; margin: 2px 4px 2px 0; padding: 8px 12px; font-size: 12px; } }
</style>
<div class="main-wrapper">
  <div class="page-container">
    <div class="page-header">
      <h1 class="page-title">Medios de Acreditación</h1>
      <form method="get" style="display: flex; align-items: center; gap: 12px;">
        <label for="cliente_id" style="font-weight: 500; color: #152C70;">Filtrar por cliente:</label>
        <select name="cliente_id" id="cliente_id" class="form-control" onchange="this.form.submit()" style="min-width: 200px;">
          <option value="">Todos</option>
          {% for c in clientes %}
            <option value="{{ c.id }}" {% if cliente and cliente.id == c.id %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>
      </form>
      <button class="btn-add rounded border-0 my-2" onclick="openCreateModal('{% url 'medio_acreditacion_create' %}{% if cliente %}?cliente_id={{ cliente.id }}{% endif %}', 'Agregar Medio de Acreditación')">+ Agregar Medio</button>   
    </div>
    <div class="table-container">
      <table class="custom-table">
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Entidad</th>
            <th>Número de Cuenta</th>
            <th>Tipo de Cuenta</th>
            <th>Titular</th>
            <th>Moneda</th>
            <th>Activo</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody style="text-align: center;">
          {% for medio in medios %}
            <tr>
              <td data-label="Cliente">{{ medio.cliente }}</td>
              <td data-label="Entidad">{{ medio.entidad }}</td>
              <td data-label="Número de Cuenta">{{ medio.numero_cuenta }}</td>
              <td data-label="Tipo de Cuenta">{{ medio.get_tipo_cuenta_display }}</td>
              <td data-label="Titular">{{ medio.titular }}</td>
              <td data-label="Moneda">{{ medio.moneda }}</td>
              <td data-label="Estado">{% if medio.estado %}<span class="status-badge status-activo">Activo</span>{% else %}<span class="status-badge status-inactivo">Inactivo</span>{% endif %}</td>
              <td data-label="Acciones">
              <button class="btn-edit btn btn-sm btn-primary"
                data-id="{{ medio.id }}"
                data-edit="{% url 'medio_acreditacion_update' 0 %}"
                data-title="Editar Medio de Acreditación"
                data-detalle="{% url 'medio_acreditacion_detail' medio.id %}">
                  Editar
              </button>
                {% if medio.estado %}
                  <button type="button"
                          class="btn-delete btn btn-sm btn-danger"
                          onclick='openDeleteModal({{ medio.id }}, "{% url "medio_acreditacion_toggle" 0 %}", "¿Seguro que deseas desactivar este registro?", "Desactivar")'>
                    Desactivar
                  </button>
                {% else %}
                  <button type="button"
                          class="btn-delete btn btn-sm btn-success"
                          onclick='openDeleteModal({{ medio.id }}, "{% url "medio_acreditacion_toggle" 0 %}", "¿Seguro que deseas activar este registro?", "Activar")'>
                    Activar
                  </button>
                  {% endif %}
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="8" class="no-results">Sin resultados encontrados.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% include "medio_acreditacion/medio_acreditacion_form.html" %}
{% endblock %}
