<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} mt-2">
      {{ message }}
    </div>
  {% endfor %}
{% endif %}

<h1 class="mb-4 text-center">EDITAR PERFIL</h1>
<form method="POST" class="w-50 mx-auto">
    {% csrf_token %}

    <div class="mb-3">
        <label for="id_username" class="form-label">Username</label>
        {{ form.username }}
        {% for error in form.username.errors %}
            <div class="text-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="mb-3">
        <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
        {{ form.email }}
        {% for error in form.email.errors %}
            <div class="text-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="mb-3">
        <label for="{{ form.password_actual.id_for_label }}" class="form-label">Contraseña Actual</label>
        {{ form.password_actual }}
        {% for error in form.password_actual.errors %}
            <div class="text-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="mb-3">
        <label for="{{ form.password_nuevo.id_for_label }}" class="form-label">Contraseña Nueva</label>
        {{ form.password_nuevo }}
        {% for error in form.password_nuevo.errors %}
            <div class="text-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="mb-3">
        <label for="{{ form.password_confirmacion.id_for_label }}" class="form-label">Confirmación de Contraseña</label>
        {{ form.password_confirmacion }}
        {% for error in form.password_confirmacion.errors %}
            <div class="text-danger">{{ error }}</div>
        {% endfor %}
    </div>
    
    <button type="submit"  name="action" value="guardar" class="btn btn-primary">Guardar Cambios</button>
    <button type="submit" name="action" value="eliminar" class="btn btn-danger" id="btnEliminar">Eliminar Cuenta</button>

</form>

<script>
document.getElementById('btnEliminar').addEventListener('click', function() {
    if (confirm("¿Estás seguro de que quieres eliminar tu cuenta? Esta acción no se puede deshacer.")) {
        this.closest('form').submit();
    }
});
</script>

